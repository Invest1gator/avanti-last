{% extends "base.html" %}
{% load static %}
{% load i18n %}
{% block title %}Avanti-Products{% endblock title %}

{% block content %}
  <main class="main">

    <!-- Page Title -->
    <div class="page-title accent-background">
      <div class="container d-lg-flex justify-content-between align-items-center">
        <h1 class="mb-2 mb-lg-0">{% trans "Products" %}</h1>
        <nav class="breadcrumbs">
          <ol>
            <li><a href="{% url 'index' %}">{% trans "Home" %}</a></li>
            <li class="current">{% trans "Products" %}</li>
          </ol>
        </nav>
      </div>
    </div><!-- End Page Title -->

    <!-- Section Title -->
    <section id="team" class="team section light-background">
      <div class="container section-title" data-aos="fade-up">
        <h2>{% trans "Our Products" %}</h2>
        <p>{% trans "Explore our Product range as your trusted sourcing partner, where quality and reliability meet to streamline your supply chain needs. Uncover the best sourcing solutions for your business right here." %}</p>
      </div><!-- End Section Title -->
    </section>

    <!-- Main Categories and Subcategories -->
    {% for category in main_categories %}
      <section class="py-5 {% if forloop.counter|divisibleby:2 %}light-background{% endif %}">
        <div class="container">
          <div class="row align-items-stretch">
            
            <!-- Image Column (alternates left/right) -->
            <div class="col-lg-6 d-flex align-items-center {% if forloop.counter|divisibleby:2 %}order-lg-2{% endif %}" 
                 data-aos="zoom-out" data-aos-delay="200">
              <div class="w-100">
                {% if category.image %}
                  <img src="{{ category.image.url }}" 
                       class="img-fluid rounded shadow" 
                       alt="{{ category.content.name }}"
                       style="max-height: 400px; width: 100%; object-fit: cover;">
                {% else %}
                  <img src="{% static 'products1.jpeg' %}" 
                       class="img-fluid rounded shadow" 
                       alt="{{ category.content.name }}"
                       style="max-height: 400px; width: 100%; object-fit: cover;">
                {% endif %}
              </div>
            </div>

            <!-- Text Column -->
            <div class="col-lg-6 d-flex align-items-center" data-aos="fade-up" data-aos-delay="100">
              <div class="p-4 w-100">
                <h2 class="mb-4">{{ category.content.name }}</h2>
                {% if category.content.description %}
                  <p class="mb-4 text-muted">{{ category.content.description }}</p>
                {% endif %}
                
                <!-- Subcategories List -->
                {% if category.subcategories_with_content %}
                  <div class="subcategories-list">
                    {% for subcategory in category.subcategories_with_content %}
                      <div class="subcategory-item mb-4 p-3 border-start border-primary border-3 bg-light rounded">
                        <h5 class="text-primary mb-2">
                          <i class="bi bi-arrow-right-circle me-2"></i>
                          {{ subcategory.content.name }}
                        </h5>
                        {% if subcategory.content.description %}
                          <p class="text-muted mb-0">{{ subcategory.content.description }}</p>
                        {% endif %}
                      </div>
                    {% endfor %}
                  </div>
                {% else %}
                  <div class="alert alert-info">
                    <i class="bi bi-info-circle me-2"></i>
                    {% trans "No subcategories available for this category yet." %}
                  </div>
                {% endif %}
              </div>
            </div>
          </div>
        </div>
      </section>
    {% empty %}
      <section class="py-5">
        <div class="container">
          <div class="alert alert-warning text-center">
            <h4>{% trans "No categories found" %}</h4>
            <p>{% trans "Please add some product categories in the admin panel." %}</p>
          </div>
        </div>
      </section>
    {% endfor %}

  </main>
{% endblock content %}